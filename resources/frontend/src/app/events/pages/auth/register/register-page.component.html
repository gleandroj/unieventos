<form [formGroup]="signupForm" (ngSubmit)="onSubmit(signupForm.value)" novalidate class="signup-card" fxFlex.xs="100%"
    fxFlex.sm="76%" fxFlex.md="50%" fxFlex.lg="40%" fxFlex.xl="30%">
    <mat-toolbar class="default-toolbar mat-elevation-z4">
        <a matTooltip="Voltar" matTooltipPosition="above" mat-icon-button routerLink="/auth/login">
            <mat-icon>arrow_back</mat-icon>
        </a>
        <h3>Cadastro de usuário</h3>
    </mat-toolbar>
    <mat-progress-bar [ngClass]="{'disabled': !loading}" mode="indeterminate"></mat-progress-bar>
    <mat-card class="mat-typography">
        <span class="white-space" *ngIf="!loading"></span>
        <mat-card-content fxLayout="column">

            <h1>Dados Pessoais</h1>

            <div fxFlex="100" class="input-card">
                <h3>Imagem do Perfil</h3>
                <div fxLayout="row" fxLayoutAlign.xs="center center" fxLayoutAlign="start center" fxLayoutWrap>
                    <img style="margin:15px;" class="circular--landscape" [src]="imageSrc">
                    <input hidden type="file" id="imgFileInput" #imgFileInput (change)="previewImage($event)" />
                    <div fxLayout="column" style="margin:15px;">
                        <button type="button" mat-button mat-raised-button (click)="imgFileInput.click()">Selecionar
                            Imagem </button>
                        <button style="margin-top:15px;" type="button" [disabled]="imageUploadData == null" mat-button
                            mat-raised-button (click)="removeImagem(imgFileInput)">Remover Imagem</button>
                    </div>
                </div>
            </div>

            <div fxFlex="100" class="input-card">
                <mat-form-field class="full-width">
                    <input matInput placeholder="Nome Completo" formControlName="name" type="text" required>
                    <mat-error *ngIf="signupForm.controls['name'].hasError('required')">
                        O campo nome é <strong>obrigatório.</strong>
                    </mat-error>
                </mat-form-field>
            </div>

            <div fxFlex="100" fxLayout="row" fxLayoutWrap class="input-card">
                <div>
                    <h3>Sexo:</h3>
                    <mat-radio-group formControlName="gender">
                        <mat-radio-button *ngFor="let sexo of sexos" [value]="sexo.value">
                            {{sexo.label}}
                        </mat-radio-button>
                    </mat-radio-group>
                </div>
            </div>
            <mat-form-field class="input-card" style="margin-top: 20px;">
                <input name="birthday" matInput formControlName="birthday" pattern="\d{2}\/\d{2}\/\d{4}" placeholder="Data de nascimento"
                    required>
                <mat-icon matSuffix>date_range</mat-icon>
                <mat-error *ngIf="signupForm.controls['birthday'].hasError('required')">
                    O campo data de nascimento é <strong>obrigatório.</strong>
                </mat-error>
                <mat-error *ngIf="signupForm.controls['birthday'].hasError('pattern')">
                    Entre com uma data válida.
                </mat-error>
            </mat-form-field>

            <div fxFlex="100" class="input-card">
                <mat-form-field class="full-width">
                    <input matInput placeholder="Endereço" formControlName="address" type="text" required>
                    <mat-error *ngIf="signupForm.controls['address'].hasError('required')">
                        O campo endereço é <strong>obrigatório.</strong>
                    </mat-error>
                </mat-form-field>
            </div>

            <div fxFlex="100" fxLayout="row" fxLayoutWrap class="input-card">
                <mat-form-field fxFlex="45" fxFlex.sm="100" fxFlex.xs="100">
                    <input matInput placeholder="Telefone" pattern="\(\d{2}\) \d{5}-\d{4}" formControlName="phone" type="text"
                        required>
                    <mat-error *ngIf="signupForm.controls['phone'].hasError('pattern')">
                        Entre com um telefone válido.
                    </mat-error>
                    <mat-error *ngIf="signupForm.controls['phone'].hasError('required')">
                        O campo telefone é <strong>obrigatório.</strong>
                    </mat-error>
                </mat-form-field>
                <span fxFlex="5"></span>
                <mat-form-field fxFlex="50" fxFlex.sm="100" fxFlex.xs="100">
                    <input matInput placeholder="E-mail" formControlName="email" type="text" email required>
                    <mat-error *ngIf="signupForm.controls['email'].hasError('email')">
                        Entre com um endereço de e-mail válido.
                    </mat-error>
                    <mat-error *ngIf="signupForm.controls['email'].hasError('required')">
                        O campo e-mail é <strong>obrigatório.</strong>
                    </mat-error>
                </mat-form-field>
            </div>

            <div fxFlex="100" fxLayout="row" fxLayoutWrap class="input-card">
                <mat-form-field fxFlex="45" fxFlex.sm="100" fxFlex.xs="100">
                    <input validateEqual="password_confirmation" matInput placeholder="Senha" formControlName="password"
                        type="password" required>
                    <mat-error *ngIf="signupForm.controls['password'].hasError('required')">
                        O campo senha é <strong>obrigatório.</strong>
                    </mat-error>

                    <mat-error *ngIf="!signupForm.controls['password'].hasError('required') && signupForm.controls['password'].hasError('minlength')">
                        A senha deve conter no mínino <strong>6</strong> caracteres.
                    </mat-error>

                    <mat-error *ngIf="!signupForm.controls['password'].hasError('minlength') && !signupForm.controls['password'].hasError('required') && signupForm.controls['password'].hasError('validateEqual')">
                        As senhas não conferem.
                    </mat-error>
                </mat-form-field>
                <span fxFlex="5"></span>
                <mat-form-field fxFlex="45" fxFlex.sm="100" fxFlex.xs="100">
                    <input matInput placeholder="C/ Senha" formControlName="password_confirmation" type="password"
                        required>
                    <mat-error *ngIf="signupForm.controls['password_confirmation'].hasError('required')">
                        O campo confirmação senha é <strong>obrigatório.</strong>
                    </mat-error>
                </mat-form-field>
            </div>

            <div fxFlex="100" fxLayout="row" fxLayoutWrap class="input-card push-10">
                <div>
                    <h3>Vínculo:</h3>
                    <mat-radio-group formControlName="type">
                        <mat-radio-button *ngFor="let vinculo of vinculos" [value]="vinculo.value">
                            {{vinculo.label}}
                        </mat-radio-button>
                    </mat-radio-group>
                </div>
            </div>

            <div fxFlex="100" class="input-card" [hidden]="this.signupForm.value['type'] == 2">
                <mat-form-field class="full-width">
                    <input matInput placeholder="Matrícula" pattern="\d{7}" formControlName="registration" type="text"
                        [required]="this.signupForm.value['type'] != 2">
                    <mat-error *ngIf="signupForm.controls['registration'].hasError('required')">
                        O campo matrícula é <strong>obrigatório.</strong>
                    </mat-error>
                    <mat-error *ngIf="signupForm.controls['registration'].hasError('pattern')">
                        Entre com uma matrícula válida.
                    </mat-error>
                </mat-form-field>
            </div>
            <div fxFlex="100" fxLayout="row" fxLayoutWrap class="input-card">
                <button type="submit" class="block-btn" mat-button mat-raised-button color="accent" [disabled]="signupForm.invalid || loading">Cadastrar</button>
            </div>
        </mat-card-content>
    </mat-card>
</form>